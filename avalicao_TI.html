<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagnóstico de Maturidade Tecnológica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Ajuste para quebra de página no PDF */
        .page-break-inside-avoid {
            page-break-inside: avoid;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="app" class="max-w-4xl mx-auto p-4 sm:p-6 md:p-8">

        <!-- Cabeçalho -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-slate-900">Diagnóstico Rápido de Maturidade Tecnológica</h1>
            <p class="mt-2 text-slate-600">Avalie o nível de maturidade da sua empresa.</p>
        </header>

        <!-- Seção do Questionário -->
        <div id="questionnaireSection" class="fade-in">
            <div class="bg-white p-6 rounded-2xl shadow-lg mb-8">
                <h2 class="text-xl font-bold text-indigo-700 mb-4 border-b pb-3">Informações Iniciais</h2>
                <div>
                    <label for="companyName" class="block font-semibold text-slate-800 mb-2">Nome da Empresa:</label>
                    <input type="text" id="companyName" name="companyName" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition" placeholder="Digite o nome da sua empresa" required>
                </div>
            </div>

            <form id="techMaturityForm" class="space-y-8">
                <!-- As perguntas serão injetadas aqui pelo JavaScript -->
            </form>

            <div id="validationMessage" class="hidden text-center text-red-600 font-semibold my-6 p-3 bg-red-100 rounded-lg"></div>

            <div class="mt-10 text-center">
                <button id="submitButton" type="button" class="bg-indigo-600 text-white font-semibold py-3 px-8 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">
                    Ver meu Resultado
                </button>
            </div>
        </div>

        <!-- Seção de Resultados (inicialmente oculta) -->
        <div id="resultsSectionWrapper" class="hidden fade-in">
            <div id="resultsSection" class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg">
                <h2 class="text-2xl sm:text-3xl font-bold text-center text-slate-900 mb-6">Seu Diagnóstico para <span id="resultCompanyName" class="text-indigo-600">sua Empresa</span> está Pronto!</h2>

                <div class="text-center bg-slate-100 p-6 rounded-xl mb-8 page-break-inside-avoid">
                    <p class="text-lg text-slate-600">Sua pontuação de maturidade é:</p>
                    <p id="totalScore" class="text-5xl sm:text-6xl font-extrabold text-indigo-600 my-2">0/0</p>
                    <div class="w-full bg-slate-200 rounded-full h-4 mt-4">
                        <div id="scoreBar" class="bg-indigo-500 h-4 rounded-full transition-all duration-1000 ease-out" style="width: 0%"></div>
                    </div>
                    <div class="mt-4">
                        <p id="maturityLevel" class="inline-block px-4 py-1 text-sm font-bold rounded-full"></p>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-8 items-start">
                    <!-- Gráfico -->
                    <div class="bg-slate-50 p-4 rounded-xl page-break-inside-avoid">
                         <h3 class="text-xl font-bold text-slate-800 mb-4 text-center">Maturidade por Área</h3>
                        <canvas id="maturityChart"></canvas>
                    </div>

                    <!-- Problemas Urgentes -->
                    <div class="page-break-inside-avoid">
                        <h3 class="text-xl font-bold text-slate-800 mb-4 flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                            </svg>
                            Plano de Ação Urgente
                        </h3>
                        <p class="text-slate-600 mb-4">Com base nas suas respostas, estes são os pontos mais críticos que merecem atenção imediata:</p>
                        <ul id="urgentIssues" class="space-y-3 text-slate-700 text-sm">
                           <!-- Itens de urgência serão injetados aqui -->
                        </ul>
                    </div>
                </div>
                
                <div class="mt-8 text-xs text-slate-400 text-center">
                    Relatório gerado automaticamente pelo Diagnóstico de Maturidade Tecnológica.
                </div>
            </div>
             <div id="resultsButtons" class="mt-8 text-center flex flex-col sm:flex-row gap-4 justify-center">
                <button id="downloadPdfButton" type="button" class="bg-indigo-600 text-white font-semibold py-3 px-8 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">
                    Baixar Resultado em PDF
                </button>
                <button id="redoButton" type="button" class="bg-slate-200 text-slate-800 font-semibold py-3 px-8 rounded-lg hover:bg-slate-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-400 transition">
                    Refazer Diagnóstico
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const questions = [
                // Seção 1: Fundamentos e Pessoas
                { id: 1, theme: 'Fundamentos e Pessoas', text: 'Existem regras claras (mesmo que informais) sobre como usar a tecnologia da empresa? (Ex: o que não pode ser instalado, sites proibidos, etc).', urgency_tip: 'Defina regras básicas de uso da tecnologia. Crie um documento simples sobre o que pode e não pode ser feito nos computadores da empresa.' },
                { id: 2, theme: 'Fundamentos e Pessoas', text: 'Os colaboradores recebem alguma orientação sobre segurança? (Ex: como identificar e-mails falsos/phishing, importância de senhas seguras).', urgency_tip: 'Promova uma breve orientação sobre segurança. Alerte sobre e-mails falsos e a importância de não clicar em links suspeitos.' },
                { id: 3, theme: 'Fundamentos e Pessoas', text: 'Os funcionários e principais parceiros assinam algum termo de confidencialidade para proteger as informações da sua empresa?', urgency_tip: 'Implemente um Termo de Confidencialidade (NDA) para todos os colaboradores e parceiros. Modelos simples estão disponíveis online.' },
                { id: 21, theme: 'Fundamentos e Pessoas', text: 'A empresa possui licenças originais e válidas para todos os softwares instalados (Windows, Office, etc)?', urgency_tip: 'Realize uma auditoria de software. O uso de software não licenciado ("pirata") gera riscos legais graves e é uma porta comum para vírus.' },
                { id: 29, theme: 'Fundamentos e Pessoas', text: 'Os computadores são configurados para bloquear a tela automaticamente após um tempo sem uso?', urgency_tip: 'Configure o bloqueio automático de tela (ex: 5 minutos). Isso evita que visitantes ou pessoas não autorizadas acessem dados se o funcionário sair da mesa.' },

                // Seção 2: Equipamentos e Acessos
                { id: 4, theme: 'Equipamentos e Acessos', text: 'A empresa sabe exatamente quais computadores, notebooks e celulares corporativos estão com quem?', urgency_tip: 'Crie um inventário simples (pode ser uma planilha) listando todos os equipamentos e quem é o responsável por cada um.' },
                { id: 5, theme: 'Equipamentos e Acessos', text: 'Quando um funcionário é contratado ou demitido, existe um processo para criar e (o mais importante) remover todos os seus acessos?', urgency_tip: 'Crie um checklist de entrada e saída de funcionários. Garantir a remoção de todos os acessos na saída é CRÍTICO para a segurança.' },
                { id: 6, theme: 'Equipamentos e Acessos', text: 'A empresa exige o uso de senhas fortes nos sistemas? (Ex: trocas periódicas, mínimo de caracteres).', urgency_tip: 'Ative a política de senhas fortes nos seus principais sistemas (e-mail, ERP). A maioria dos serviços já oferece essa opção.' },
                { id: 7, theme: 'Equipamentos e Acessos', text: 'A empresa utiliza "Verificação em Duas Etapas" (MFA) para acessar os principais sistemas (e-mail, sistema financeiro)?', urgency_tip: 'Ative a Verificação em Duas Etapas (MFA) em todas as contas possíveis, começando pelo e-mail dos administradores. Isso é uma das barreiras mais eficazes contra invasões.' },
                { id: 8, theme: 'Equipamentos e Acessos', text: 'Se os funcionários usam seus próprios equipamentos para o trabalho (BYOD), existe alguma regra para proteger os dados da empresa?', urgency_tip: 'Defina regras mínimas para uso de equipamentos pessoais, como a obrigatoriedade de ter um antivírus atualizado e tela de bloqueio com senha.' },
                { id: 22, theme: 'Equipamentos e Acessos', text: 'Os computadores e sistemas são configurados para realizar atualizações automáticas de segurança?', urgency_tip: 'Ative as atualizações automáticas do sistema operacional e softwares. Sistemas desatualizados são a vulnerabilidade mais explorada por hackers.' },

                // Seção 3: Proteção e Defesa
                { id: 9, theme: 'Proteção e Defesa', text: 'Todos os computadores da empresa possuem um antivírus profissional (pago e gerenciado) instalado e atualizado?', urgency_tip: 'Instale um antivírus profissional em TODAS as máquinas. Soluções gratuitas não oferecem o gerenciamento e a proteção necessários para um ambiente de negócios.' },
                { id: 10, theme: 'Proteção e Defesa', text: 'A rede do escritório é protegida por um firewall além do roteador padrão da operadora?', urgency_tip: 'Considere investir em um firewall de rede. Ele oferece uma camada de proteção vital contra ameaças externas da internet.' },
                { id: 26, theme: 'Proteção e Defesa', text: 'Existe uma rede Wi-Fi separada exclusiva para visitantes, isolada da rede principal da empresa?', urgency_tip: 'Crie uma rede "Guest" (Visitante) no seu roteador Wi-Fi. Nunca forneça a senha da rede principal, onde trafegam dados críticos, para visitantes.' },
                { id: 11, theme: 'Proteção e Defesa', text: 'Os dados mais importantes da empresa possuem uma rotina de backup automática e regular?', urgency_tip: 'Implemente uma rotina de backup AUTOMÁTICA imediatamente. Dados perdidos podem quebrar um negócio. Use soluções em nuvem para maior segurança.' },
                { id: 12, theme: 'Proteção e Defesa', text: 'Esse backup é testado de vez em quando para garantir que os dados podem ser recuperados?', urgency_tip: 'Teste seus backups periodicamente. Um backup que não funciona é o mesmo que não ter backup.' },
                { id: 13, theme: 'Proteção e Defesa', text: 'Os notebooks da empresa usam criptografia de disco para proteção em caso de roubo ou perda?', urgency_tip: 'Ative a criptografia de disco (BitLocker no Windows, FileVault no Mac) em todos os notebooks. É um recurso nativo e protege os dados em caso de perda ou roubo.' },
                { id: 23, theme: 'Proteção e Defesa', text: 'Existe um controle ou bloqueio sobre o uso de dispositivos USB (Pen drives, HDs externos) nos computadores da empresa?', urgency_tip: 'Considere bloquear ou monitorar portas USB para evitar o vazamento de dados por funcionários ou a entrada de vírus via Pen Drive infectado.' },
                { id: 25, theme: 'Proteção e Defesa', text: 'Além do backup na empresa, existe uma cópia dos dados salva em um local externo ou na nuvem (Backup Off-site)?', urgency_tip: 'Adote a regra de backup 3-2-1: tenha pelo menos uma cópia dos dados FORA da empresa (nuvem) para proteção total contra roubo físico ou incêndio.' },

                // Seção 4: Continuidade e Riscos
                { id: 14, theme: 'Continuidade e Riscos', text: 'A empresa tem um "Plano B" básico caso um desastre aconteça (Ex: ataque de ransomware, alagamento)?', urgency_tip: 'Desenvolva um plano de recuperação simples. Defina quem contatar, onde estão os backups e quais são os sistemas prioritários para restabelecer.' },
                { id: 15, theme: 'Continuidade e Riscos', text: 'Se um funcionário perceber um vírus ou vazamento de dados, ele sabe para quem ligar ou o que fazer imediatamente?', urgency_tip: 'Defina e comunique um ponto de contato claro para emergências de segurança. Agilidade na resposta pode minimizar drasticamente os danos.' },
                { id: 16, theme: 'Continuidade e Riscos', text: 'A empresa avalia a segurança dos seus principais fornecedores de tecnologia (sistema de gestão, e-mail, etc)?', urgency_tip: 'Questione seus fornecedores sobre as práticas de segurança deles. A segurança do seu negócio também depende da segurança deles.' },
                { id: 24, theme: 'Continuidade e Riscos', text: 'Existe um contrato formal com uma empresa ou profissional de TI que garanta atendimento rápido (SLA) em caso de problemas?', urgency_tip: 'Formalize o suporte de TI. Depender de ajuda informal ("sobrinho") coloca o negócio em risco em momentos críticos.' },
                { id: 27, theme: 'Continuidade e Riscos', text: 'Os servidores ou equipamentos principais ficam em local seguro (trancado) e climatizado (ar condicionado)?', urgency_tip: 'Proteja fisicamente seus servidores. Mantenha-os em local trancado (acesso restrito) e com temperatura controlada para evitar falhas por superaquecimento.' },
                { id: 28, theme: 'Continuidade e Riscos', text: 'A empresa possui Nobreaks ou geradores para manter os equipamentos ligados em caso de falta de energia?', urgency_tip: 'Instale Nobreaks nos equipamentos críticos (servidores, roteadores). Quedas bruscas de energia podem corromper dados e queimar equipamentos.' },

                // Seção 5: Privacidade de Dados (LGPD)
                { id: 17, theme: 'Privacidade de Dados (LGPD)', text: 'A empresa sabe quais dados pessoais (de clientes e funcionários) ela coleta, por que coleta e onde eles ficam guardados?', urgency_tip: 'Faça um mapeamento dos dados pessoais que sua empresa trata. Entender o que você tem é o primeiro passo para a conformidade com a LGPD.' },
                { id: 18, theme: 'Privacidade de Dados (LGPD)', text: 'A empresa tem um canal para clientes pedirem para ver ou apagar seus dados (Direito do Titular)?', urgency_tip: 'Crie um canal de comunicação para atender aos direitos dos titulares (pode ser um e-mail específico). Responda às solicitações para evitar multas.' },
                { id: 19, theme: 'Privacidade de Dados (LGPD)', text: 'A empresa tem uma rotina para apagar dados pessoais que não são mais necessários (respeitando prazos legais)?', urgency_tip: 'Estabeleça uma política de retenção e descarte de dados. Guardar dados desnecessários aumenta os riscos e pode violar a LGPD.' },
                { id: 20, theme: 'Privacidade de Dados (LGPD)', text: 'A empresa se preocupa se seus principais fornecedores (contabilidade, marketing) também estão adequados à LGPD?', urgency_tip: 'Verifique a conformidade de seus fornecedores com a LGPD. Inclua cláusulas sobre proteção de dados nos contratos.' },
            ];

            const options = [
                { label: 'Não (Não temos)', value: 0 },
                { label: 'Em Planejamento', value: 1 },
                { label: 'Parcialmente', value: 2 },
                { label: 'Sim (Definido)', value: 4 },
                { label: 'Não Sei / Não se Aplica', value: 0 }
            ];
            
            const form = document.getElementById('techMaturityForm');
            const submitButton = document.getElementById('submitButton');
            const redoButton = document.getElementById('redoButton');
            const downloadPdfButton = document.getElementById('downloadPdfButton');
            const questionnaireSection = document.getElementById('questionnaireSection');
            const resultsSectionWrapper = document.getElementById('resultsSectionWrapper');
            const companyNameInput = document.getElementById('companyName');
            const validationMessage = document.getElementById('validationMessage');
            let maturityChart = null;
            const maxTotalScore = questions.length * 4; // Dynamic max score

            const questionsByTheme = questions.reduce((acc, q) => {
                if (!acc[q.theme]) { acc[q.theme] = []; }
                acc[q.theme].push(q);
                return acc;
            }, {});

            for (const theme in questionsByTheme) {
                const themeContainer = document.createElement('div');
                themeContainer.className = 'bg-white p-6 rounded-2xl shadow-lg';

                const themeTitle = document.createElement('h2');
                themeTitle.className = 'text-xl font-bold text-indigo-700 mb-6 border-b pb-3';
                themeTitle.textContent = theme;
                themeContainer.appendChild(themeTitle);

                const questionsContainer = document.createElement('div');
                questionsContainer.className = 'space-y-6';

                questionsByTheme[theme].forEach((q) => {
                    const questionBlock = document.createElement('div');
                    const questionText = document.createElement('p');
                    questionText.className = 'font-semibold text-slate-800 mb-3';
                    questionText.textContent = `${q.id}. ${q.text}`;
                    questionBlock.appendChild(questionText);

                    const optionsContainer = document.createElement('div');
                    optionsContainer.className = 'flex flex-wrap gap-x-6 gap-y-3';
                    options.forEach(opt => {
                        const label = document.createElement('label');
                        label.className = 'flex items-center space-x-2 text-slate-600 cursor-pointer';
                        const radio = document.createElement('input');
                        radio.type = 'radio';
                        radio.name = `question_${q.id}`;
                        radio.value = opt.value;
                        radio.required = true;
                        radio.className = 'form-radio h-4 w-4 text-indigo-600 border-slate-300 focus:ring-indigo-500';
                        const span = document.createElement('span');
                        span.textContent = opt.label;
                        label.appendChild(radio);
                        label.appendChild(span);
                        optionsContainer.appendChild(label);
                    });
                    questionBlock.appendChild(optionsContainer);
                    questionsContainer.appendChild(questionBlock);
                });
                
                themeContainer.appendChild(questionsContainer);
                form.appendChild(themeContainer);
            }

            const calculateResults = () => {
                validationMessage.classList.add('hidden');
                if (!form.checkValidity() || !companyNameInput.value) {
                    validationMessage.textContent = 'Por favor, preencha o nome da empresa e responda a todas as perguntas.';
                    validationMessage.classList.remove('hidden');
                    return;
                }

                let totalScore = 0;
                const themeScores = {};
                const urgentIssuesList = [];

                questions.forEach(q => {
                    const selected = form.querySelector(`input[name="question_${q.id}"]:checked`);
                    if (selected) {
                        const value = parseInt(selected.value);
                        totalScore += value;
                        if (!themeScores[q.theme]) {
                            themeScores[q.theme] = { score: 0, maxScore: 0 };
                        }
                        themeScores[q.theme].score += value;
                        themeScores[q.theme].maxScore += 4;
                        if (value === 0) {
                            urgentIssuesList.push(q.urgency_tip);
                        }
                    }
                });

                displayResults(totalScore, themeScores, urgentIssuesList);
            };

            const displayResults = (score, themes, issues) => {
                questionnaireSection.classList.add('hidden');
                resultsSectionWrapper.classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });

                document.getElementById('resultCompanyName').textContent = companyNameInput.value;
                document.getElementById('totalScore').textContent = `${score}/${maxTotalScore}`;
                
                const percentage = (score / maxTotalScore) * 100;
                const scoreBar = document.getElementById('scoreBar');
                setTimeout(() => { scoreBar.style.width = `${percentage}%`; }, 100);

                const maturityLevelEl = document.getElementById('maturityLevel');
                let levelText, levelColorClasses;
                if (percentage <= 25) {
                    [levelText, levelColorClasses] = ['Nível Inicial', 'bg-red-100 text-red-800'];
                } else if (percentage <= 50) {
                    [levelText, levelColorClasses] = ['Em Desenvolvimento', 'bg-amber-100 text-amber-800'];
                } else if (percentage <= 75) {
                    [levelText, levelColorClasses] = ['Nível Maduro', 'bg-sky-100 text-sky-800'];
                } else {
                    [levelText, levelColorClasses] = ['Nível Avançado', 'bg-green-100 text-green-800'];
                }
                maturityLevelEl.textContent = levelText;
                maturityLevelEl.className = `inline-block px-4 py-1 text-sm font-bold rounded-full transition-all ${levelColorClasses}`;

                const urgentIssuesContainer = document.getElementById('urgentIssues');
                urgentIssuesContainer.innerHTML = '';
                if (issues.length > 0) {
                    issues.forEach(issue => {
                        const li = document.createElement('li');
                        li.className = 'bg-slate-50 p-3 rounded-lg flex items-start';
                        li.innerHTML = `<div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3 text-amber-500 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></div><span>${issue}</span>`;
                        urgentIssuesContainer.appendChild(li);
                    });
                } else {
                     urgentIssuesContainer.innerHTML = `<li class="text-green-600 font-semibold bg-green-50 p-3 rounded-lg flex items-center justify-center">Parabéns! Nenhum ponto crítico de alta urgência foi identificado. Continue mantendo as boas práticas!</li>`;
                }

                const ctx = document.getElementById('maturityChart').getContext('2d');
                const themeLabels = Object.keys(themes);
                const themeData = themeLabels.map(label => (themes[label].score / themes[label].maxScore) * 100);
                
                if(maturityChart) { maturityChart.destroy(); }

                maturityChart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: themeLabels.map(l => l.replace(' (LGPD)', '')),
                        datasets: [{
                            label: 'Maturidade (%)',
                            data: themeData,
                            backgroundColor: 'rgba(79, 70, 229, 0.2)',
                            borderColor: 'rgb(79, 70, 229)',
                            pointBackgroundColor: 'rgb(79, 70, 229)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(79, 70, 229)'
                        }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: true,
                        scales: {
                            r: {
                                suggestedMin: 0, suggestedMax: 100,
                                pointLabels: { font: { size: 11 } },
                                ticks: { backdropColor: 'rgba(255, 255, 255, 0.75)', stepSize: 25 }
                            }
                        },
                        plugins: { legend: { position: 'top' } }
                    }
                });
            };

            const resetForm = () => {
                form.reset();
                companyNameInput.value = '';
                resultsSectionWrapper.classList.add('hidden');
                questionnaireSection.classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            const downloadResultsAsPDF = () => {
                const element = document.getElementById('resultsSection');
                const companyName = companyNameInput.value || 'Empresa';
                const filename = `Diagnostico_Maturidade_${companyName.replace(/\s+/g, '_')}.pdf`;

                const opt = {
                    margin:       [0.3, 0.3, 0.3, 0.3],
                    filename:     filename,
                    image:        { type: 'jpeg', quality: 0.98 },
                    html2canvas:  { scale: 2, useCORS: true },
                    jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
                };
                
                html2pdf().from(element).set(opt).save();
            };

            submitButton.addEventListener('click', calculateResults);
            redoButton.addEventListener('click', resetForm);
            downloadPdfButton.addEventListener('click', downloadResultsAsPDF);
        });
    </script>
</body>
</html>
